<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <form id="gifForm">
        <input type="text" id="searchTerm" name="searchTerm" placeholder="Search"></input>
        <button type="submit">Get a new image</button>
    </form>

    <img src="" alt=" Please enter a search term to see a random gif!" />
    <h2 id="imageContent">Search above for a new image!</h2>

    <script>

        // It is important to remember async/await are just promises written in a different way.
        
        //  Let’s emphasize: await literally makes JavaScript wait until the promise settles, and then go on with the result. 
        //  That doesn’t cost any CPU resources, because the engine can do other jobs meanwhile: execute other scripts, handle events etc.
        //  It’s just a more elegant syntax of getting the promise result than promise.then, easier to read and write.


        // await doesnt work in top-level code, only in async functions 

        //  But at the top level of the code, when we’re outside of any async function, we’re syntactically unable to use await, so it’s a normal 
        //  practice to add .then/catch to handle the final result or falling-through errors.

        const img = document.querySelector('img');

        async function getCats() {              //  async function wraps API call.  then refactor from using promises to await
            try {
                const response = await fetch('https://api.giphy.com/v1/gifs/translate?api_key=7RdXv9jfxKTZyUUyJ0Giel1CP87YeVlD&s=cats', { mode: 'cors' });
                const catData = await response.json();
                img.src = catData.data.images.original.url;
            } catch (error) {
                alert(error);
            }
        }
        
        getCats();
    </script>
</body>

</html>